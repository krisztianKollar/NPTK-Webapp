@model IEnumerable<nptk.Models.Tour>

@{
    ViewBag.Title = "A Nagy Pele Túrakör túrái";
}

<h2>@ViewBag.Title</h2>

@if (User.IsInRole("Admin"))
{
    <p>
        @Html.ActionLink("Új túra", "Create")
    </p>
}

<p>
    <input id="searchInput" type="text" placeholder="Keresés"
           style="padding: 5px" data-toggle="tooltip"
           data-placement="right" title="Szűrhető a lista akár dátumra, akár helyre...">
</p>
<form>
    @Html.RadioButton("filtTour", "all", new { @checked = true, onchange = "this.form.submit();" }) <span style="padding-right:10px">Összes túra </span>
    @Html.RadioButton("filtTour", "next", new { onchange = "this.form.submit();" }) <span style="padding-right:10px">Következő túráink </span>
    @Html.RadioButton("filtTour", "prev", new { onchange = "this.form.submit();" }) <span style="padding-right:10px">Korábbi túráink </span>
</form>

<table class="table" id="searchTable">
    <tr>
        <th>
            @Html.ActionLink("Túra", "Index", new { sortOrder = ViewBag.TitleSortParm, currentFilter = ViewBag.CurrentFilter })
        </th>
        <th>
            @Html.ActionLink("Dátum", "Index", new { sortOrder = ViewBag.DateSortParm, currentFilter = ViewBag.CurrentFilter })
        </th>
        <th>
            @Html.ActionLink("\u2192 (km)", "Index", new { sortOrder = ViewBag.DistanceSortParm, currentFilter = ViewBag.CurrentFilter })
        </th>
        <th>
            @Html.ActionLink("\u2197 (m)", "Index", new { sortOrder = ViewBag.ClimbSortParm, currentFilter = ViewBag.CurrentFilter })
        </th>
    </tr>


    @foreach (var item in Model)
    {
        string actual = "";
        string highlight = "transparent";
        string linkColor = "";

        if (item.IsActual == true)
        {
            actual = " – AKTUÁLIS TÚRÁNK";
            highlight = "yellowgreen";
            linkColor = "#cc6600";
        }
        <tr colspan="2" style="background-color:@highlight; color:@linkColor">
            <td>
                <span style="font-weight:600">@Html.DisplayFor(modelItem => item.Title)</span><span style="color:#cc6600; font-weight:600">@actual</span> <br /> @Html.DisplayNameFor(model => model.Track): @Html.DisplayFor(modelItem => item.Track)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Date)
            </td>
            <td>

                @Html.DisplayFor(modelItem => item.Distance)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Climb)
            </td>
            <td>
                @if (User.IsInRole("Admin"))
                {
                    @Html.ActionLink("Szerkesztés", "Edit", new { id = item.TourId }, new { @style = "color:" + linkColor}) <span> |</span>
                    @Html.ActionLink("Törlés", "Delete", new { id = item.TourId }, new { @style = "color:" + linkColor }) <span> |</span>
                }
                @Html.ActionLink("Részletek ", "Details", new { id = item.TourId }, new { @style = "color:" + linkColor })
            </td>
        </tr>

    }

</table>
